<div class="flex flex-col items-center gap-8">
  <!-- Controls -->
  <app-simulation-controls
    [isRunning]="isRunning()"
    [isIdle]="isIdle()"
    (run)="runSimulation($event)"
    (reset)="resetSimulation()">
  </app-simulation-controls>

  <!-- Pipeline Visualization -->
  <div class="w-full max-w-7xl relative">
    @if (simulationStatus() !== 'idle') {
      <div class="absolute top-1/2 left-0 w-full h-0.5 bg-slate-700" aria-hidden="true"></div>
    }
    <div class="flex flex-col md:flex-row justify-between items-stretch gap-4 md:gap-2">
      @for (phase of phases; track phase.phase; let i = $index) {
        <div class="flex-1 min-w-0">
          <app-phase-card [phase]="phase" [status]="getPhaseStatus(i)" [duration]="phaseDurations()[i]"></app-phase-card>
        </div>
      }
    </div>
  </div>


  <!-- Output Display -->
  @if (isComplete() && outputs(); as finalOutputs) {
    <div class="w-full max-w-4xl mt-8">
      <app-output-display [outputs]="finalOutputs"></app-output-display>
    </div>
  }
</div>