<div [class]="cardClasses()">
  <!-- Status Indicator -->
  <div class="absolute top-3 right-3">
    @switch (status()) {
      @case ('running') {
        <div class="w-4 h-4 rounded-full bg-cyan-500 animate-pulse" title="Running"></div>
      }
      @case ('complete') {
        <div class="w-4 h-4 rounded-full bg-green-500 flex items-center justify-center" title="Complete">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
          </svg>
        </div>
      }
    }
  </div>

  <div class="flex items-center gap-4">
    <div [class]="iconContainerClasses()">
      <!-- Icons -->
      @switch (phase().icon) {
        @case ('key') {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" /></svg>
        }
        @case ('upload') {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
        }
        @case ('dna') {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 21a5 5 0 005-5v-1a5 5 0 00-5-5H6a5 5 0 00-5 5v1a5 5 0 005 5h4zm11-13a.5.5 0 01.5.5v1a.5.5 0 01-1 0v-1a.5.5 0 01.5-.5z" /><path stroke-linecap="round" stroke-linejoin="round" d="M3.558 10.435A2.992 2.992 0 013 10a3 3 0 013-3h1.382a3 3 0 012.992 2.565 3 3 0 010 .87 3 3 0 01-2.992 2.565H6a3 3 0 01-3-3c0-.144.01-.286.03-.428M17.5 7a.5.5 0 01.5.5v1a.5.5 0 01-1 0v-1a.5.5 0 01.5-.5z" /></svg>
        }
        @case ('chip') {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M12 6V3m0 18v-3M5.636 5.636l1.414 1.414m10.607 10.607l-1.414-1.414M18.364 5.636l-1.414 1.414M7.05 18.364l-1.414-1.414M12 12a3 3 0 100-6 3 3 0 000 6z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 12a3 3 0 100-6 3 3 0 000 6z" /><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
        }
        @case ('cube') {
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" /></svg>
        }
      }
    </div>
    <span class="text-3xl font-light text-slate-500 mr-2">
      {{ '0' + phase().phase }}
    </span>
    <h3 class="text-lg font-bold text-gray-200 flex-1">
      {{ phase().title }}
    </h3>
  </div>

  <div class="mt-3 pl-1 flex-grow">
    <p class="text-sm text-slate-400">
      {{ phase().description }}
    </p>
  </div>
  
  @if (status() === 'complete' && duration() !== null) {
    <div class="mt-2 pt-2 border-t border-slate-700/50 text-right">
      <p class="text-xs text-slate-500 font-mono">
        Completed in: <span class="font-semibold text-green-400">{{ (duration()! / 1000).toFixed(2) }}s</span>
      </p>
    </div>
  }
</div>
